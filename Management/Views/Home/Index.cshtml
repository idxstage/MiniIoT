@{
    ViewData["Title"] = "Home Page";
}
<html>
<head>
    <div class="text-center">
        <h1 class="display-4">Welcome</h1>
        <p>Learn about <a href="https://docs.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
    </div>
</head>
<body>
    <table style="width:100%;">
        <tr>
            <th>Nome Servizio</th>
            <th>Status</th>
        </tr>
        <tr>
            <th>Alerting</th>
            <th id="Alerting">Offline</th>
        </tr>
        <tr>
            <td>Database</td>
            <td id="Database">Offline</td>
        </tr>
        <tr>
            <td>Hub</td>
            <td id="Hub">Offline</td>
        </tr>
        <tr>
            <th>Nodered</th>
            <th id="Nodered">Offline</th>
        </tr>
        <tr>
            <td>Grafana</td>
            <td id="Grafana">Offline</td>
        </tr>
        <tr>
            <td>RabbitMQ</td>
            <td id="RabbitMQ">Offline</td>
        </tr>
    </table>

</body>

<script src="~/lib/jquery/dist/jquery.js"></script>
<script>
    $(document).ready(function () {

        function StartPing() {
            var myVar = setInterval(Ping, 1000);
            alert("test");
        }


        function Ping() {
            $.ajax({
                type: "GET",
                url: "/Home/CheckAll",
                contentType: "application/json; charset=utf-8",
                dataType: "json",

                success: function (response) {
                    var risultati = response.d.split(";");
                    risultati.forEach(elementi => {
                        var contenuto = elementi.split(":");
                        var id = contenuto[0];
                        var valore = contenuto[1];
                        if (valore == 1) {
                            document.getElementById(id).style.backgroundColor = "green";
                            document.getElementById(id).innerText = "Online";
                        }
                        else {
                            document.getElementById(id).style.backgroundColor = "red";
                            document.getElementById(id).innerText = "Offline";
                        }
                    });

                },
                failure: function (response) {
                    alert("Salve!");
                }
            });


        }

        function GetHTML() {
            xmlDoc = xhttp.responseXML;
            txt = "";
            x = xmlDoc.getElementsByTagName("ARTIST");
            for (i = 0; i < x.length; i++) {
                txt += x[i].childNodes[0].nodeValue + "<br>";
            }
            document.getElementById("demo").innerHTML = txt;
            xhttp.open("GET", "cd_catalog.xml", true);
            xhttp.send();

        }

        StartPing();

    });
</script>

</html>